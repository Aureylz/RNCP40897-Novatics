<mxfile host="app.diagrams.net" agent="Claude AI" version="24.0.0">
  <diagram name="Architecture Cloud Novatics AWS" id="cloud-aws-architecture">
    <mxGraphModel dx="1800" dy="1400" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1654" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        
        <!-- ==================== TITRE ==================== -->
        <mxCell id="title-box" value="" style="rounded=0;whiteSpace=wrap;html=1;strokeColor=#059669;fillColor=#ECFDF5;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="40" y="40" width="1574" height="80" as="geometry" />
        </mxCell>
        <mxCell id="title-main" value="NOVATICS CLOUD - Architecture AWS (eu-west-3 Paris)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;fontSize=24;fontStyle=1;fontColor=#047857;" vertex="1" parent="1">
          <mxGeometry x="60" y="50" width="650" height="40" as="geometry" />
        </mxCell>
        <mxCell id="title-sub" value="NCC Backend | TÃ©lÃ©mÃ©trie Robots | DonnÃ©es Missions | aws.novatics.corp" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;fontSize=12;fontColor=#64748B;" vertex="1" parent="1">
          <mxGeometry x="60" y="85" width="550" height="20" as="geometry" />
        </mxCell>
        <mxCell id="title-ref" value="RÃ©f: NOV-SSI-2025-005-E | v1.0 | Classification: Confidentiel Entreprise" style="text;html=1;strokeColor=none;fillColor=none;align=right;verticalAlign=middle;fontSize=10;fontColor=#64748B;" vertex="1" parent="1">
          <mxGeometry x="1100" y="85" width="500" height="20" as="geometry" />
        </mxCell>
        
        <!-- ==================== INTERNET / SOURCES EXTERNES ==================== -->
        <mxCell id="internet-zone" value="" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#DC2626;fillColor=#FEF2F2;strokeWidth=2;strokeDashArray=8 8;" vertex="1" parent="1">
          <mxGeometry x="40" y="140" width="1200" height="100" as="geometry" />
        </mxCell>
        <mxCell id="internet-label" value="INTERNET / SOURCES EXTERNES (Trust Level 0)" style="text;html=1;strokeColor=none;fillColor=#DC2626;align=center;verticalAlign=middle;fontSize=10;fontStyle=1;fontColor=#FFFFFF;rounded=1;" vertex="1" parent="1">
          <mxGeometry x="50" y="150" width="300" height="18" as="geometry" />
        </mxCell>
        
        <mxCell id="robots-field" value="ðŸ¤– Robots en Mission&#xa;N-Eye / N-Seeker&#xa;4G/5G/Starlink&#xa;MQTT over TLS" style="shape=hexagon;perimeter=hexagonPerimeter2;whiteSpace=wrap;html=1;strokeColor=#D6B656;fillColor=#FEF3C7;fontSize=9;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="80" y="175" width="120" height="55" as="geometry" />
        </mxCell>
        <mxCell id="ncc-operators" value="ðŸ‘¨â€ðŸ’» OpÃ©rateurs NCC&#xa;Clients (SDIS, SÃ©cu Civile)&#xa;HTTPS + WebSocket" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#2A526E;fillColor=#DBEAFE;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="230" y="175" width="130" height="55" as="geometry" />
        </mxCell>
        <mxCell id="toulouse-vpn" value="ðŸ¢ Site Toulouse&#xa;VPN Site-to-Site&#xa;IPsec IKEv2" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#7C3AED;fillColor=#EDE9FE;fontSize=9;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="390" y="175" width="110" height="55" as="geometry" />
        </mxCell>
        <mxCell id="devs-remote" value="ðŸ‘©â€ðŸ’» DÃ©veloppeurs&#xa;AccÃ¨s API/Admin&#xa;VPN + MFA" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#7C5F8B;fillColor=#E9D5FF;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="530" y="175" width="110" height="55" as="geometry" />
        </mxCell>
        <mxCell id="partners-api" value="ðŸ¤ Partenaires API&#xa;DGA, IntÃ©grateurs&#xa;API Key + Rate Limit" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#059669;fillColor=#D1FAE5;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="670" y="175" width="120" height="55" as="geometry" />
        </mxCell>
        
        <!-- ==================== AWS REGION eu-west-3 ==================== -->
        <mxCell id="aws-region" value="" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#F59E0B;fillColor=#FFFBEB;strokeWidth=3;" vertex="1" parent="1">
          <mxGeometry x="40" y="260" width="1200" height="700" as="geometry" />
        </mxCell>
        <mxCell id="aws-region-label" value="AWS Region eu-west-3 (Paris) - Compte Production" style="text;html=1;strokeColor=none;fillColor=#F59E0B;align=center;verticalAlign=middle;fontSize=11;fontStyle=1;fontColor=#FFFFFF;rounded=1;" vertex="1" parent="1">
          <mxGeometry x="50" y="270" width="320" height="20" as="geometry" />
        </mxCell>
        
        <!-- ==================== VPC VALINOR ==================== -->
        <mxCell id="vpc-valinor" value="" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#059669;fillColor=#ECFDF5;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="60" y="310" width="1160" height="630" as="geometry" />
        </mxCell>
        <mxCell id="vpc-label" value="VPC vpc-valinor | CIDR: 10.100.0.0/16 | DNS: Enabled | Flow Logs: Enabled" style="text;html=1;strokeColor=none;fillColor=#059669;align=center;verticalAlign=middle;fontSize=10;fontStyle=1;fontColor=#FFFFFF;rounded=1;" vertex="1" parent="1">
          <mxGeometry x="70" y="320" width="450" height="18" as="geometry" />
        </mxCell>
        
        <!-- ==================== AVAILABILITY ZONE A ==================== -->
        <mxCell id="az-a" value="" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#3B82F6;fillColor=#EFF6FF;strokeWidth=1;strokeDashArray=4 4;" vertex="1" parent="1">
          <mxGeometry x="80" y="350" width="540" height="570" as="geometry" />
        </mxCell>
        <mxCell id="az-a-label" value="Availability Zone eu-west-3a (Primary)" style="text;html=1;strokeColor=none;fillColor=#3B82F6;align=center;verticalAlign=middle;fontSize=9;fontStyle=1;fontColor=#FFFFFF;rounded=1;" vertex="1" parent="1">
          <mxGeometry x="90" y="360" width="220" height="16" as="geometry" />
        </mxCell>
        
        <!-- Public Subnet AZa -->
        <mxCell id="sn-grey-havens-a" value="" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#10B981;fillColor=#D1FAE5;strokeWidth=1;" vertex="1" parent="1">
          <mxGeometry x="100" y="390" width="500" height="130" as="geometry" />
        </mxCell>
        <mxCell id="sn-public-a-label" value="Public Subnet sn-grey-havens-a | 10.100.1.0/24" style="text;html=1;strokeColor=none;fillColor=#10B981;align=center;verticalAlign=middle;fontSize=9;fontStyle=1;fontColor=#FFFFFF;rounded=1;" vertex="1" parent="1">
          <mxGeometry x="110" y="400" width="280" height="16" as="geometry" />
        </mxCell>
        
        <mxCell id="igw" value="Internet&#xa;Gateway&#xa;igw-novatics" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#10B981;fillColor=#FFFFFF;fontSize=8;align=center;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="120" y="425" width="70" height="50" as="geometry" />
        </mxCell>
        <mxCell id="nat-gw-a" value="NAT Gateway&#xa;nat-valinor-a&#xa;EIP attached" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#10B981;fillColor=#FFFFFF;fontSize=8;align=center;" vertex="1" parent="1">
          <mxGeometry x="210" y="425" width="80" height="50" as="geometry" />
        </mxCell>
        <mxCell id="alb" value="Application LB&#xa;alb-ncc-prod&#xa;ncc.novatics.io&#xa;ACM Certificate" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#10B981;fillColor=#FFFFFF;fontSize=8;align=center;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="310" y="425" width="90" height="55" as="geometry" />
        </mxCell>
        <mxCell id="nlb-mqtt" value="Network LB&#xa;nlb-mqtt-prod&#xa;mqtt.novatics.io&#xa;TCP/8883" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#10B981;fillColor=#FFFFFF;fontSize=8;align=center;" vertex="1" parent="1">
          <mxGeometry x="420" y="425" width="90" height="55" as="geometry" />
        </mxCell>
        <mxCell id="bastion-a" value="Bastion&#xa;EC2 t3.micro&#xa;SSM Session" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#10B981;fillColor=#FFFFFF;fontSize=8;align=center;" vertex="1" parent="1">
          <mxGeometry x="520" y="430" width="70" height="45" as="geometry" />
        </mxCell>
        
        <!-- Private App Subnet AZa -->
        <mxCell id="sn-mithlond-a" value="" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#8B5CF6;fillColor=#EDE9FE;strokeWidth=1;" vertex="1" parent="1">
          <mxGeometry x="100" y="540" width="500" height="170" as="geometry" />
        </mxCell>
        <mxCell id="sn-app-a-label" value="Private App Subnet sn-mithlond-a | 10.100.10.0/24" style="text;html=1;strokeColor=none;fillColor=#8B5CF6;align=center;verticalAlign=middle;fontSize=9;fontStyle=1;fontColor=#FFFFFF;rounded=1;" vertex="1" parent="1">
          <mxGeometry x="110" y="550" width="290" height="16" as="geometry" />
        </mxCell>
        
        <mxCell id="eks-cluster" value="" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#8B5CF6;fillColor=#FFFFFF;strokeWidth=1;" vertex="1" parent="1">
          <mxGeometry x="120" y="575" width="290" height="120" as="geometry" />
        </mxCell>
        <mxCell id="eks-label" value="EKS Cluster eks-ncc-prod (K8s 1.29)" style="text;html=1;strokeColor=none;fillColor=#8B5CF6;align=center;verticalAlign=middle;fontSize=8;fontStyle=1;fontColor=#FFFFFF;rounded=1;" vertex="1" parent="1">
          <mxGeometry x="130" y="580" width="200" height="14" as="geometry" />
        </mxCell>
        
        <mxCell id="pod-api" value="ncc-api&#xa;FastAPI&#xa;3 replicas" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#8B5CF6;fillColor=#F3E8FF;fontSize=7;align=center;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="135" y="600" width="60" height="40" as="geometry" />
        </mxCell>
        <mxCell id="pod-ws" value="ncc-ws&#xa;WebSocket&#xa;2 replicas" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#8B5CF6;fillColor=#F3E8FF;fontSize=7;align=center;" vertex="1" parent="1">
          <mxGeometry x="205" y="600" width="60" height="40" as="geometry" />
        </mxCell>
        <mxCell id="pod-mqtt" value="emqx&#xa;MQTT Broker&#xa;3 replicas" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#D6B656;fillColor=#FEF3C7;fontSize=7;align=center;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="275" y="600" width="60" height="40" as="geometry" />
        </mxCell>
        <mxCell id="pod-worker" value="celery&#xa;Workers&#xa;5 replicas" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#8B5CF6;fillColor=#F3E8FF;fontSize=7;align=center;" vertex="1" parent="1">
          <mxGeometry x="345" y="600" width="55" height="40" as="geometry" />
        </mxCell>
        <mxCell id="pod-grafana" value="grafana&#xa;Dashboards" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#8B5CF6;fillColor=#F3E8FF;fontSize=7;align=center;" vertex="1" parent="1">
          <mxGeometry x="135" y="650" width="60" height="35" as="geometry" />
        </mxCell>
        <mxCell id="pod-prometheus" value="prometheus&#xa;Metrics" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#8B5CF6;fillColor=#F3E8FF;fontSize=7;align=center;" vertex="1" parent="1">
          <mxGeometry x="205" y="650" width="60" height="35" as="geometry" />
        </mxCell>
        <mxCell id="pod-loki" value="loki&#xa;Logs" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#8B5CF6;fillColor=#F3E8FF;fontSize=7;align=center;" vertex="1" parent="1">
          <mxGeometry x="275" y="650" width="55" height="35" as="geometry" />
        </mxCell>
        
        <mxCell id="kong-gw" value="Kong Gateway&#xa;API Management&#xa;Rate Limiting&#xa;Auth JWT" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#8B5CF6;fillColor=#FFFFFF;fontSize=8;align=center;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="430" y="575" width="90" height="60" as="geometry" />
        </mxCell>
        <mxCell id="redis-cache" value="ElastiCache&#xa;Redis 7&#xa;cache.t3.medium&#xa;Session/Cache" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#DC2626;fillColor=#FEE2E2;fontSize=8;align=center;" vertex="1" parent="1">
          <mxGeometry x="430" y="645" width="90" height="55" as="geometry" />
        </mxCell>
        <mxCell id="sqs-queue" value="SQS Queue&#xa;Async Tasks" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#8B5CF6;fillColor=#FFFFFF;fontSize=8;align=center;" vertex="1" parent="1">
          <mxGeometry x="535" y="585" width="55" height="40" as="geometry" />
        </mxCell>
        
        <!-- Private Data Subnet AZa -->
        <mxCell id="sn-undying-a" value="" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#DC2626;fillColor=#FEE2E2;strokeWidth=1;" vertex="1" parent="1">
          <mxGeometry x="100" y="730" width="500" height="170" as="geometry" />
        </mxCell>
        <mxCell id="sn-data-a-label" value="Private Data Subnet sn-undying-lands-a | 10.100.20.0/24" style="text;html=1;strokeColor=none;fillColor=#DC2626;align=center;verticalAlign=middle;fontSize=9;fontStyle=1;fontColor=#FFFFFF;rounded=1;" vertex="1" parent="1">
          <mxGeometry x="110" y="740" width="320" height="16" as="geometry" />
        </mxCell>
        
        <mxCell id="rds-timescale" value="RDS PostgreSQL 16&#xa;+ TimescaleDB&#xa;db.r6g.xlarge&#xa;Multi-AZ: Yes&#xa;Encrypted: AES-256" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#DC2626;fillColor=#FFFFFF;fontSize=8;align=center;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="120" y="765" width="110" height="70" as="geometry" />
        </mxCell>
        <mxCell id="rds-label" value="timescale-ncc-prod&#xa;TÃ©lÃ©mÃ©trie robots&#xa;~500GB data" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;fontSize=7;fontColor=#991B1B;" vertex="1" parent="1">
          <mxGeometry x="120" y="840" width="110" height="35" as="geometry" />
        </mxCell>
        
        <mxCell id="s3-missions" value="S3 Bucket&#xa;novatics-missions-prod&#xa;Versioning: On&#xa;Lifecycle: 90dâ†’Glacier" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#F59E0B;fillColor=#FEF3C7;fontSize=8;align=center;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="250" y="765" width="110" height="65" as="geometry" />
        </mxCell>
        <mxCell id="s3-missions-label" value="Images, vidÃ©os missions&#xa;DonnÃ©es SLAM&#xa;~2TB" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;fontSize=7;fontColor=#92400E;" vertex="1" parent="1">
          <mxGeometry x="250" y="835" width="110" height="35" as="geometry" />
        </mxCell>
        
        <mxCell id="s3-backups" value="S3 Bucket&#xa;novatics-backups-prod&#xa;Cross-Region: Yes" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#F59E0B;fillColor=#FEF3C7;fontSize=8;align=center;" vertex="1" parent="1">
          <mxGeometry x="380" y="765" width="100" height="55" as="geometry" />
        </mxCell>
        
        <mxCell id="secrets-mgr" value="Secrets Manager&#xa;DB credentials&#xa;API keys&#xa;Rotation: 30d" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#059669;fillColor=#D1FAE5;fontSize=8;align=center;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="500" y="765" width="90" height="60" as="geometry" />
        </mxCell>
        
        <!-- ==================== AVAILABILITY ZONE B ==================== -->
        <mxCell id="az-b" value="" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#3B82F6;fillColor=#EFF6FF;strokeWidth=1;strokeDashArray=4 4;" vertex="1" parent="1">
          <mxGeometry x="640" y="350" width="280" height="570" as="geometry" />
        </mxCell>
        <mxCell id="az-b-label" value="Availability Zone eu-west-3b (Standby)" style="text;html=1;strokeColor=none;fillColor=#3B82F6;align=center;verticalAlign=middle;fontSize=9;fontStyle=1;fontColor=#FFFFFF;rounded=1;" vertex="1" parent="1">
          <mxGeometry x="650" y="360" width="220" height="16" as="geometry" />
        </mxCell>
        
        <!-- Public Subnet AZb -->
        <mxCell id="sn-grey-havens-b" value="" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#10B981;fillColor=#D1FAE5;strokeWidth=1;" vertex="1" parent="1">
          <mxGeometry x="660" y="390" width="240" height="80" as="geometry" />
        </mxCell>
        <mxCell id="sn-public-b-label" value="sn-grey-havens-b | 10.100.2.0/24" style="text;html=1;strokeColor=none;fillColor=#10B981;align=center;verticalAlign=middle;fontSize=8;fontColor=#FFFFFF;rounded=1;" vertex="1" parent="1">
          <mxGeometry x="670" y="400" width="200" height="14" as="geometry" />
        </mxCell>
        <mxCell id="nat-gw-b" value="NAT GW b&#xa;(Standby)" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#10B981;fillColor=#FFFFFF;fontSize=8;align=center;" vertex="1" parent="1">
          <mxGeometry x="680" y="420" width="70" height="40" as="geometry" />
        </mxCell>
        <mxCell id="alb-b" value="ALB Target&#xa;(Multi-AZ)" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#10B981;fillColor=#FFFFFF;fontSize=8;align=center;" vertex="1" parent="1">
          <mxGeometry x="770" y="420" width="70" height="40" as="geometry" />
        </mxCell>
        
        <!-- Private App Subnet AZb -->
        <mxCell id="sn-mithlond-b" value="" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#8B5CF6;fillColor=#EDE9FE;strokeWidth=1;" vertex="1" parent="1">
          <mxGeometry x="660" y="490" width="240" height="100" as="geometry" />
        </mxCell>
        <mxCell id="sn-app-b-label" value="sn-mithlond-b | 10.100.11.0/24" style="text;html=1;strokeColor=none;fillColor=#8B5CF6;align=center;verticalAlign=middle;fontSize=8;fontColor=#FFFFFF;rounded=1;" vertex="1" parent="1">
          <mxGeometry x="670" y="500" width="180" height="14" as="geometry" />
        </mxCell>
        <mxCell id="eks-nodes-b" value="EKS Node Group b&#xa;t3.xlarge x3&#xa;Spot Instances" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#8B5CF6;fillColor=#FFFFFF;fontSize=8;align=center;" vertex="1" parent="1">
          <mxGeometry x="680" y="525" width="100" height="50" as="geometry" />
        </mxCell>
        <mxCell id="redis-replica" value="Redis Replica&#xa;Read Replica" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#DC2626;fillColor=#FEE2E2;fontSize=8;align=center;" vertex="1" parent="1">
          <mxGeometry x="800" y="525" width="80" height="50" as="geometry" />
        </mxCell>
        
        <!-- Private Data Subnet AZb -->
        <mxCell id="sn-undying-b" value="" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#DC2626;fillColor=#FEE2E2;strokeWidth=1;" vertex="1" parent="1">
          <mxGeometry x="660" y="610" width="240" height="100" as="geometry" />
        </mxCell>
        <mxCell id="sn-data-b-label" value="sn-undying-lands-b | 10.100.21.0/24" style="text;html=1;strokeColor=none;fillColor=#DC2626;align=center;verticalAlign=middle;fontSize=8;fontColor=#FFFFFF;rounded=1;" vertex="1" parent="1">
          <mxGeometry x="670" y="620" width="200" height="14" as="geometry" />
        </mxCell>
        <mxCell id="rds-standby" value="RDS Standby&#xa;Multi-AZ Replica&#xa;Auto-failover" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#DC2626;fillColor=#FFFFFF;fontSize=8;align=center;" vertex="1" parent="1">
          <mxGeometry x="680" y="645" width="100" height="50" as="geometry" />
        </mxCell>
        
        <!-- VPN Connection -->
        <mxCell id="vpn-zone" value="" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#7C3AED;fillColor=#EDE9FE;strokeWidth=1;" vertex="1" parent="1">
          <mxGeometry x="660" y="730" width="240" height="100" as="geometry" />
        </mxCell>
        <mxCell id="vpn-label" value="Site-to-Site VPN" style="text;html=1;strokeColor=none;fillColor=#7C3AED;align=center;verticalAlign=middle;fontSize=8;fontColor=#FFFFFF;rounded=1;" vertex="1" parent="1">
          <mxGeometry x="670" y="740" width="100" height="14" as="geometry" />
        </mxCell>
        <mxCell id="vgw" value="Virtual Private GW&#xa;vgw-novatics&#xa;BGP ASN 65000" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#7C3AED;fillColor=#FFFFFF;fontSize=8;align=center;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="680" y="760" width="100" height="55" as="geometry" />
        </mxCell>
        <mxCell id="cgw" value="Customer GW&#xa;â†’ Toulouse&#xa;gandalf-fw" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#7C3AED;fillColor=#FFFFFF;fontSize=8;align=center;" vertex="1" parent="1">
          <mxGeometry x="795" y="760" width="90" height="55" as="geometry" />
        </mxCell>
        
        <!-- ==================== SECURITY GROUPS ==================== -->
        <mxCell id="sg-zone" value="" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#059669;fillColor=#D1FAE5;strokeWidth=1;" vertex="1" parent="1">
          <mxGeometry x="940" y="350" width="260" height="290" as="geometry" />
        </mxCell>
        <mxCell id="sg-title" value="SECURITY GROUPS &amp; NACL" style="text;html=1;strokeColor=none;fillColor=#059669;align=center;verticalAlign=middle;fontSize=9;fontStyle=1;fontColor=#FFFFFF;rounded=1;" vertex="1" parent="1">
          <mxGeometry x="950" y="360" width="180" height="16" as="geometry" />
        </mxCell>
        
        <mxCell id="sg-narsil" value="sg-narsil (ALB/NLB)&#xa;â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&#xa;Inbound:&#xa;â€¢ 443/tcp from 0.0.0.0/0&#xa;â€¢ 8883/tcp from 0.0.0.0/0&#xa;Outbound: â†’ sg-glamdring" style="text;html=1;strokeColor=#10B981;fillColor=#FFFFFF;align=left;verticalAlign=top;fontSize=7;rounded=1;spacingLeft=5;spacingTop=3;" vertex="1" parent="1">
          <mxGeometry x="955" y="385" width="120" height="80" as="geometry" />
        </mxCell>
        
        <mxCell id="sg-glamdring" value="sg-glamdring (EKS)&#xa;â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&#xa;Inbound:&#xa;â€¢ 8000/tcp from sg-narsil&#xa;â€¢ 1883/tcp from sg-narsil&#xa;Outbound: â†’ sg-anduril" style="text;html=1;strokeColor=#8B5CF6;fillColor=#FFFFFF;align=left;verticalAlign=top;fontSize=7;rounded=1;spacingLeft=5;spacingTop=3;" vertex="1" parent="1">
          <mxGeometry x="1080" y="385" width="115" height="80" as="geometry" />
        </mxCell>
        
        <mxCell id="sg-anduril" value="sg-anduril (RDS)&#xa;â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&#xa;Inbound:&#xa;â€¢ 5432/tcp from sg-glamdring&#xa;â€¢ 5432/tcp from 10.10.0.0/16&#xa;Outbound: None" style="text;html=1;strokeColor=#DC2626;fillColor=#FFFFFF;align=left;verticalAlign=top;fontSize=7;rounded=1;spacingLeft=5;spacingTop=3;" vertex="1" parent="1">
          <mxGeometry x="955" y="475" width="120" height="80" as="geometry" />
        </mxCell>
        
        <mxCell id="sg-orcrist" value="sg-orcrist (Redis)&#xa;â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&#xa;Inbound:&#xa;â€¢ 6379/tcp from sg-glamdring&#xa;Outbound: None" style="text;html=1;strokeColor=#DC2626;fillColor=#FFFFFF;align=left;verticalAlign=top;fontSize=7;rounded=1;spacingLeft=5;spacingTop=3;" vertex="1" parent="1">
          <mxGeometry x="1080" y="475" width="115" height="70" as="geometry" />
        </mxCell>
        
        <mxCell id="waf-info" value="AWS WAF:&#xa;â€¢ OWASP Top 10 rules&#xa;â€¢ Rate limit: 1000/5min&#xa;â€¢ Bot control: On" style="text;html=1;strokeColor=#F59E0B;fillColor=#FEF3C7;align=left;verticalAlign=top;fontSize=7;rounded=1;spacingLeft=5;spacingTop=3;" vertex="1" parent="1">
          <mxGeometry x="1080" y="555" width="115" height="60" as="geometry" />
        </mxCell>
        
        <!-- ==================== BACKUP CROSS-REGION ==================== -->
        <mxCell id="backup-zone" value="" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#6B7280;fillColor=#F3F4F6;strokeWidth=1;" vertex="1" parent="1">
          <mxGeometry x="940" y="660" width="260" height="170" as="geometry" />
        </mxCell>
        <mxCell id="backup-title" value="BACKUP &amp; DR (SouverainetÃ© FR)" style="text;html=1;strokeColor=none;fillColor=#6B7280;align=center;verticalAlign=middle;fontSize=9;fontStyle=1;fontColor=#FFFFFF;rounded=1;" vertex="1" parent="1">
          <mxGeometry x="950" y="670" width="200" height="16" as="geometry" />
        </mxCell>
        
        <mxCell id="scaleway-backup" value="Scaleway&#xa;Object Storage&#xa;fr-par&#xa;ðŸ‡«ðŸ‡· Souverain" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#4F46E5;fillColor=#EEF2FF;fontSize=8;align=center;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="960" y="695" width="90" height="55" as="geometry" />
        </mxCell>
        <mxCell id="aws-backup" value="AWS Backup&#xa;Daily snapshots&#xa;RDS, EBS, S3&#xa;Retention: 30d" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#F59E0B;fillColor=#FEF3C7;fontSize=8;align=center;" vertex="1" parent="1">
          <mxGeometry x="1060" y="695" width="90" height="55" as="geometry" />
        </mxCell>
        <mxCell id="rpo-rto" value="RPO: 1h | RTO: 4h&#xa;Cross-region: eu-central-1" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;fontSize=8;fontColor=#64748B;" vertex="1" parent="1">
          <mxGeometry x="960" y="760" width="190" height="30" as="geometry" />
        </mxCell>
        <mxCell id="cost-estimate" value="CoÃ»t estimÃ©: ~$2,200/mois (~26kâ‚¬/an)" style="text;html=1;strokeColor=none;fillColor=#FEF3C7;align=center;verticalAlign=middle;fontSize=8;fontStyle=1;fontColor=#92400E;rounded=1;" vertex="1" parent="1">
          <mxGeometry x="960" y="795" width="220" height="20" as="geometry" />
        </mxCell>
        
        <!-- ==================== LÃ‰GENDE ==================== -->
        <mxCell id="legend-box" value="" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#E2E8F0;fillColor=#F8FAFC;strokeWidth=1;" vertex="1" parent="1">
          <mxGeometry x="1260" y="140" width="354" height="820" as="geometry" />
        </mxCell>
        <mxCell id="legend-title" value="RÃ‰FÃ‰RENTIEL ARCHITECTURE CLOUD" style="text;html=1;strokeColor=none;fillColor=#059669;align=center;verticalAlign=middle;fontSize=10;fontStyle=1;fontColor=#FFFFFF;rounded=1;" vertex="1" parent="1">
          <mxGeometry x="1270" y="150" width="334" height="20" as="geometry" />
        </mxCell>
        
        <!-- Subnets -->
        <mxCell id="leg-subnet-title" value="Subnets (Nomenclature SDA)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;fontSize=9;fontStyle=1;fontColor=#047857;" vertex="1" parent="1">
          <mxGeometry x="1280" y="180" width="200" height="16" as="geometry" />
        </mxCell>
        <mxCell id="leg-sn-public" value="sn-grey-havens" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#10B981;fillColor=#D1FAE5;fontSize=8;" vertex="1" parent="1">
          <mxGeometry x="1280" y="200" width="90" height="20" as="geometry" />
        </mxCell>
        <mxCell id="leg-sn-public-desc" value="Public (LB, NAT, Bastion)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;fontSize=8;fontColor=#64748B;" vertex="1" parent="1">
          <mxGeometry x="1380" y="200" width="130" height="20" as="geometry" />
        </mxCell>
        <mxCell id="leg-sn-app" value="sn-mithlond" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#8B5CF6;fillColor=#EDE9FE;fontSize=8;" vertex="1" parent="1">
          <mxGeometry x="1280" y="225" width="90" height="20" as="geometry" />
        </mxCell>
        <mxCell id="leg-sn-app-desc" value="Private App (EKS, Kong)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;fontSize=8;fontColor=#64748B;" vertex="1" parent="1">
          <mxGeometry x="1380" y="225" width="130" height="20" as="geometry" />
        </mxCell>
        <mxCell id="leg-sn-data" value="sn-undying-lands" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#DC2626;fillColor=#FEE2E2;fontSize=8;" vertex="1" parent="1">
          <mxGeometry x="1280" y="250" width="90" height="20" as="geometry" />
        </mxCell>
        <mxCell id="leg-sn-data-desc" value="Private Data (RDS, S3)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;fontSize=8;fontColor=#64748B;" vertex="1" parent="1">
          <mxGeometry x="1380" y="250" width="130" height="20" as="geometry" />
        </mxCell>
        
        <!-- Services -->
        <mxCell id="leg-svc-title" value="Services AWS" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;fontSize=9;fontStyle=1;fontColor=#047857;" vertex="1" parent="1">
          <mxGeometry x="1280" y="285" width="200" height="16" as="geometry" />
        </mxCell>
        <mxCell id="leg-services" value="EKS: Kubernetes managÃ© (ncc-api, emqx)&#xa;RDS: PostgreSQL + TimescaleDB&#xa;ElastiCache: Redis (sessions, cache)&#xa;S3: Object storage (missions, backups)&#xa;ALB/NLB: Load balancing L7/L4&#xa;Secrets Manager: Credentials rotation&#xa;WAF: Web Application Firewall&#xa;CloudWatch: Logs &amp; Metrics&#xa;VPC Flow Logs: Network monitoring" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;fontSize=8;spacingLeft=5;" vertex="1" parent="1">
          <mxGeometry x="1280" y="305" width="300" height="130" as="geometry" />
        </mxCell>
        
        <!-- Security Groups -->
        <mxCell id="leg-sg-title" value="Security Groups (Nomenclature)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;fontSize=9;fontStyle=1;fontColor=#047857;" vertex="1" parent="1">
          <mxGeometry x="1280" y="440" width="200" height="16" as="geometry" />
        </mxCell>
        <mxCell id="leg-sg-list" value="sg-narsil: Load Balancers (entrÃ©e)&#xa;sg-glamdring: EKS/Application&#xa;sg-anduril: Databases (RDS)&#xa;sg-orcrist: Cache (Redis)&#xa;sg-sting: Bastion/Admin" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;fontSize=8;fontFamily=Courier New;spacingLeft=5;" vertex="1" parent="1">
          <mxGeometry x="1280" y="460" width="250" height="75" as="geometry" />
        </mxCell>
        
        <!-- Flux -->
        <mxCell id="leg-flux-title" value="Flux Principaux" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;fontSize=9;fontStyle=1;fontColor=#047857;" vertex="1" parent="1">
          <mxGeometry x="1280" y="545" width="200" height="16" as="geometry" />
        </mxCell>
        <mxCell id="leg-flux-list" value="ðŸ¤– Robots â†’ NLB:8883 â†’ EMQX (MQTT/TLS)&#xa;ðŸ‘¨â€ðŸ’» OpÃ©rateurs â†’ ALB:443 â†’ Kong â†’ API&#xa;ðŸ”Œ WebSocket â†’ ALB:443 â†’ ncc-ws&#xa;ðŸ¢ Toulouse â†’ VPN â†’ VPC (10.10â†”10.100)&#xa;ðŸ’¾ EKS â†’ RDS:5432 (PostgreSQL)&#xa;ðŸ“¦ EKS â†’ S3 (via VPC Endpoint)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;fontSize=8;spacingLeft=5;" vertex="1" parent="1">
          <mxGeometry x="1280" y="565" width="300" height="90" as="geometry" />
        </mxCell>
        
        <!-- Chiffrement -->
        <mxCell id="leg-crypto-title" value="Chiffrement" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;fontSize=9;fontStyle=1;fontColor=#047857;" vertex="1" parent="1">
          <mxGeometry x="1280" y="665" width="200" height="16" as="geometry" />
        </mxCell>
        <mxCell id="leg-crypto-list" value="At Rest: AES-256 (KMS CMK)&#xa;In Transit: TLS 1.3&#xa;MQTT: TLS mutual auth (mTLS)&#xa;S3: SSE-S3 + Bucket Policy&#xa;RDS: Encrypted storage + SSL" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;fontSize=8;spacingLeft=5;" vertex="1" parent="1">
          <mxGeometry x="1280" y="685" width="250" height="75" as="geometry" />
        </mxCell>
        
        <!-- ConformitÃ© -->
        <mxCell id="leg-compliance-title" value="ConformitÃ© &amp; SouverainetÃ©" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;fontSize=9;fontStyle=1;fontColor=#047857;" vertex="1" parent="1">
          <mxGeometry x="1280" y="770" width="200" height="16" as="geometry" />
        </mxCell>
        <mxCell id="leg-compliance-list" value="â€¢ RÃ©gion: eu-west-3 (Paris) ðŸ‡«ðŸ‡·&#xa;â€¢ Backup souverain: Scaleway fr-par&#xa;â€¢ SOC2, ISO27001, HDS eligible&#xa;â€¢ RGPD: DonnÃ©es EU uniquement&#xa;â€¢ Cross-region DR: eu-central-1" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;fontSize=8;spacingLeft=5;" vertex="1" parent="1">
          <mxGeometry x="1280" y="790" width="300" height="75" as="geometry" />
        </mxCell>
        
        <!-- Stats -->
        <mxCell id="leg-stats" value="EKS: 6 nodes | RDS: Multi-AZ | S3: ~3TB | Redis: Cluster" style="text;html=1;strokeColor=none;fillColor=#D1FAE5;align=center;verticalAlign=middle;fontSize=8;fontColor=#047857;rounded=1;" vertex="1" parent="1">
          <mxGeometry x="1280" y="875" width="320" height="20" as="geometry" />
        </mxCell>
        <mxCell id="leg-compliance" value="Trust Level 3 - Cloud MaÃ®trisÃ©" style="text;html=1;strokeColor=none;fillColor=#059669;align=center;verticalAlign=middle;fontSize=9;fontStyle=1;fontColor=#FFFFFF;rounded=1;" vertex="1" parent="1">
          <mxGeometry x="1280" y="905" width="320" height="20" as="geometry" />
        </mxCell>
        
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
